<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="edu.spring.project.mappers.BoardMapper">
	<!-- 게시물 정보 -->
	<select id="selectBybno" resultType="BoardContents">
		select * from ${tblContents}
		where ${colBno} = #{bno}
	</select>
	
	<select id="selectbyCategoryBoard" resultType="BoardContentsVO">
		select a.Bno, a.Title, a.Count, b.Menuname , b.Href
		from (
		select *
		from ${tblContents}
		where ${colCategory} = #{href}
		order by count desc
		) a join menu b
		on a.Category = b.Href
		where rownum between 1 and 5
	</select>


	<insert id="insertContents">
		insert into ${tblContents} (${colTitle}, ${colContent}, ${colRegdate},
		${colCategory}, ${colVideopath}, ${colImagepath})
		values (#{title}, #{content}, sysdate, #{category}, #{videoPath},
		#{imagePath})

	</insert>

	<select id="selectBoard" resultType="BoardContents">
		select * from ${tblContents}
		where ${colCategory} = #{category}
	</select>


	<update id="updateCount">
		update ${tblContents}
		set ${colCount} = ${colCount} + 1
		where ${colBno} = #{bno}
	</update>

	<!-- menu select -->
	<select id="selectMenu" resultType="Menu">
		select * from ${tblMenu}
		where ${colHideandshow} = 'show'
	</select>
</mapper>







